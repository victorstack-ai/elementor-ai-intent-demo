{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://victorstack-ai.github.io/elementor-ai-intent-demo/schema/intent.schema.json",
  "title": "Elementor AI Intent",
  "type": "object",
  "additionalProperties": false,
  "required": ["version", "intent", "target", "prompt"],
  "properties": {
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "intent": {
      "type": "string",
      "enum": [
        "generate_page",
        "generate_section",
        "generate_widget",
        "edit_copy",
        "style_update",
        "layout_optimize",
        "explain",
        "audit"
      ]
    },
    "target": {
      "type": "object",
      "additionalProperties": false,
      "required": ["type"],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["page", "section", "container", "widget", "global", "template"]
        },
        "id": {"type": "string"},
        "name": {"type": "string"},
        "selector": {"type": "string"},
        "position": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "index": {"type": "integer", "minimum": 0},
            "parent_id": {"type": "string"}
          }
        }
      }
    },
    "prompt": {
      "type": "string",
      "minLength": 10
    },
    "context": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "page_title": {"type": "string"},
        "locale": {"type": "string"},
        "content_type": {"type": "string"},
        "brand": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "name": {"type": "string"},
            "voice": {"type": "string"},
            "values": {
              "type": "array",
              "items": {"type": "string"}
            }
          }
        },
        "tokens": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "colors": {
              "type": "array",
              "items": {"type": "string"}
            },
            "fonts": {
              "type": "array",
              "items": {"type": "string"}
            },
            "spacing_scale": {
              "type": "array",
              "items": {"type": "number", "minimum": 0}
            }
          }
        }
      }
    },
    "constraints": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "tone": {
          "type": "string",
          "enum": ["bold", "neutral", "friendly", "technical", "luxury"]
        },
        "audience": {"type": "string"},
        "brand_voice": {
          "type": "array",
          "items": {"type": "string"}
        },
        "accessibility": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "contrast_min": {"type": "number", "minimum": 1},
            "min_heading_depth": {"type": "integer", "minimum": 1},
            "require_alt_text": {"type": "boolean"}
          }
        },
        "layout": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "density": {"type": "string", "enum": ["airy", "balanced", "dense"]},
            "max_columns": {"type": "integer", "minimum": 1, "maximum": 6},
            "grid": {"type": "string"},
            "spacing_scale": {"type": "string"}
          }
        },
        "typography": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "font_pair": {"type": "string"},
            "scale": {"type": "string"}
          }
        },
        "color": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "palette": {
              "type": "array",
              "items": {"type": "string"}
            },
            "allow_gradients": {"type": "boolean"}
          }
        },
        "media": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "allow_stock": {"type": "boolean"},
            "hero_aspect_ratio": {"type": "string"}
          }
        }
      }
    },
    "output": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "format": {
          "type": "string",
          "enum": ["elementor_json", "html", "text", "css"]
        },
        "include_annotations": {"type": "boolean"},
        "confidence": {"type": "number", "minimum": 0, "maximum": 1}
      }
    },
    "metadata": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "request_id": {"type": "string"},
        "timestamp": {"type": "string", "format": "date-time"},
        "source": {"type": "string"},
        "author": {"type": "string"}
      }
    }
  }
}
